name: Build and push to main

on:
  push:
    branches: [main]

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v2.3.1

      - name: Install dependencies and Build üîß
        run: |
          cd client
          npm ci
          npm run build

      - name: Push build to main
        uses: EndBug/add-and-commit@v9 # –ò—Å–ø–æ–ª—å–∑—É–µ–º action –¥–ª—è –∫–æ–º–º–∏—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        with:
          message: "Add build files to client/build"
          add: "client/build" # –î–æ–±–∞–≤–ª—è–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–æ —Å–±–æ—Ä–∫–æ–π
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
